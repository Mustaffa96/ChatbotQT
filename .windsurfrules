Make the code optimize and clean architecture